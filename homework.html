<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework Assignments</title>
    <style>
        body, html {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f4f4f4;
        }
        .container {
            width: 90%;
            max-width: 700px;
            padding: 40px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            text-align: center;
        }
        .question {
            display: none;
        }
        .active {
            display: block;
        }
        .button {
            margin: 20px 0;
            padding: 15px 30px;
            font-size: 1em;
            color: white;
            background-color: #1e94c2;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .button:hover {
            background-color: #166b8e;
        }
        textarea {
            width: 100%;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Homework Assignments</h1>
        <form id="homeworkForm">
            <!-- Question 1 -->
            <div class="question active" id="q1">
                <p>Are you using an ARC or a NARC?</p>
                <button type="button" class="button" onclick="nextQuestion('ARC')">ARC</button>
                <button type="button" class="button" onclick="nextQuestion('NARC')">NARC</button>
            </div>
            
            <!-- ARC Homework Assignments -->
            <div class="question" id="arc1">
                <p>1. Enable low brightness mode in the Sonance app. How would you rate the LED brightness in 'LOW' mode?</p>
                <textarea id="arc1_input" rows="4"></textarea>
                <button type="button" class="button" onclick="recordTextAnswer('arc1')">Next</button>
            </div>
            <div class="question" id="arc2">
                <p>2. Verify that the protection LED flashes without delays. Does it stop excessive playtime while flashing?</p>
                <textarea id="arc2_input" rows="4"></textarea>
                <button type="button" class="button" onclick="recordTextAnswer('arc2')">Next</button>
            </div>
            <div class="question" id="arc3">
                <p>3. Test the mute function. Does the mute unlock correctly when adjusting volume?</p>
                <textarea id="arc3_input" rows="4"></textarea>
                <button type="button" class="button" onclick="recordTextAnswer('arc3')">Next</button>
            </div>
            <div class="question" id="arc4">
                <p>4. Verify the TV mute CEC command. Does the ARC unmute after 30 seconds without user input?</p>
                <textarea id="arc4_input" rows="4"></textarea>
                <button type="button" class="button" onclick="recordTextAnswer('arc4')">Next</button>
            </div>
            <div class="question" id="arc5">
                <p>5. Check the STATUS LED for correct color changes when switching inputs (HDMI, RCA, etc.).</p>
                <textarea id="arc5_input" rows="4"></textarea>
                <button type="button" class="button" onclick="recordTextAnswer('arc5')">Next</button>
            </div>
            <div class="question" id="arc6">
                <p>6. Test the line-out feature. Do you hear any popping sounds when modifying the delay setting?</p>
                <textarea id="arc6_input" rows="4"></textarea>
                <button type="button" class="button" onclick="recordTextAnswer('arc6')">Next</button>
            </div>
            <div class="question" id="arc7">
                <p>7. Measure the time it takes for audio to resume from standby mode. Does the delay seem acceptable?</p>
                <textarea id="arc7_input" rows="4"></textarea>
                <button type="button" class="button" onclick="recordTextAnswer('arc7')">Next</button>
            </div>
            
            <!-- Submit Button -->
            <div class="question" id="submitPage">
                <p>Thank you for completing the questions!</p>
                <button type="submit" class="button">Submit</button>
            </div>
        </form>
    </div>

    <script>
        let responses = {};

        function nextQuestion(device) {
            document.getElementById('q1').classList.remove('active');
            if (device === 'ARC') {
                document.getElementById('arc1').classList.add('active');
            }
        }

        function recordTextAnswer(questionId) {
            const input = document.getElementById(`${questionId}_input`).value;
            responses[questionId] = input;
            document.getElementById(questionId).classList.remove('active');
            
            const nextQuestionId = getNextQuestion(questionId);
            if (nextQuestionId) {
                document.getElementById(nextQuestionId).classList.add('active');
            } else {
                document.getElementById('submitPage').classList.add('active');
            }
        }

        function getNextQuestion(current) {
            const order = ['arc1', 'arc2', 'arc3', 'arc4', 'arc5', 'arc6', 'arc7'];
            const index = order.indexOf(current);
            return index !== -1 && index < order.length - 1 ? order[index + 1] : null;
        }

        document.getElementById('homeworkForm').onsubmit = function(e) {
            e.preventDefault();
            sendEmail(responses);
            alert("Your responses have been submitted!");
        };

        function sendEmail(data) {
            fetch('https://sonance-homework.vercel.app/submit-homework', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
        }
    </script>
</body>
</html>
